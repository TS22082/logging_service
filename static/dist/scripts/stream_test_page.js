let e;function t(){console.log("Connecting to stream..."),e=new EventSource("/api/stream"),e.onopen=function(){console.log("âœ… Connected to stream")},e.onmessage=function(o){console.log("ðŸ“¨ Received:",o.data);try{const n=JSON.parse(o.data);console.log("Data ==>",n)}catch(n){console.error("Error parsing message:",n)}},e.onerror=function(o){console.error("âŒ Stream error:",o),setTimeout(()=>{e.readyState===EventSource.CONNECTING&&console.log("ðŸ”„ Reconnecting...")},1e3)}}function r(){e&&(e.close(),console.log("ðŸ”Œ Disconnected from stream"))}document.addEventListener("DOMContentLoaded",function(){t()});window.addEventListener("beforeunload",function(){r()});
