let e;function t(){console.log("Connecting to stream..."),e=new EventSource("/api/stream"),e.onopen=function(){console.log("✅ Connected to stream")},e.onmessage=function(o){console.log("📨 Received:",o.data);try{const n=JSON.parse(o.data);console.log("Data ==>",n)}catch(n){console.error("Error parsing message:",n)}},e.onerror=function(o){console.error("❌ Stream error:",o),setTimeout(()=>{e.readyState===EventSource.CONNECTING&&console.log("🔄 Reconnecting...")},1e3)}}function r(){e&&(e.close(),console.log("🔌 Disconnected from stream"))}document.addEventListener("DOMContentLoaded",function(){t()});window.addEventListener("beforeunload",function(){r()});
