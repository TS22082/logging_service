const r=n=>n.split("/")[n.split("/").length-1].replace(/\/$/,"");let o;function c(){console.log("Connecting to stream...");const n=r(window.location.href);o=new EventSource(`/api/dashboard/logs/${n}/stream`),o.onopen=function(){console.log("✅ Connected to stream")},o.onmessage=function(e){console.log("📨 Received:",e.data);try{const t=JSON.parse(e.data);console.log("Data ==>",t)}catch(t){console.error("Error parsing message:",t)}},o.onerror=function(e){console.error("❌ Stream error:",e),setTimeout(()=>{o.readyState===EventSource.CONNECTING&&console.log("🔄 Reconnecting...")},1e3)}}function s(){o&&(o.close(),console.log("🔌 Disconnected from stream"))}document.addEventListener("DOMContentLoaded",function(){c()});window.addEventListener("beforeunload",function(){s()});
