import{J as p,h as v,p as c,i as D,n as u,j as m,k as r,m as y,o as P}from"./constants-6zwyP_62.js";const T=t=>{const e=document.createElement("tr"),n=document.createElement("td"),a=document.createElement("a"),o=document.createElement("td"),d=document.createElement("td"),i=document.createElement("td"),s=document.createElement("button"),l=document.createElement("td");return a.innerText=t.name,a.href=`/admin/project/${t.id}`,a.classList.add("primary__link"),o.innerText="1",d.innerText="0",s.innerText="Delete",s.setAttribute("data-project-id",t.id),s.classList.add("delete__link"),l.innerText=t.plan,n.appendChild(a),i.appendChild(s),e.setAttribute("id","project_"+t.id),e.appendChild(n),e.appendChild(l),e.appendChild(o),e.appendChild(d),e.appendChild(i),e},b={Post:async(t,e)=>await(await fetch(t,{method:"POST",body:JSON.stringify(e),headers:p})).json(),Put:async t=>await(await fetch(t,{method:"PUT",headers:p})).json(),Delete:async t=>await(await fetch(t,{method:"DELETE",headers:p})).json()};v.forEach(t=>{t.addEventListener("change",e=>{const a=e.target.value;c&&(c.innerText=D[a])})});u&&u.addEventListener("submit",async function(t){t.preventDefault();const e=Array.from(v).find(o=>o.checked),n=e?e.value:"basic",a=u.projectInput;if(!a.value){c&&(c.innerText="Project name cannot be blank"),setTimeout(()=>{c&&(c.innerText=D[n])},1e3);return}try{const o={project:a.value,plan:n},d=await b.Post("/api/project",o),{id:i,name:s}=d,l=T({id:i,name:s,plan:n});m&&m.appendChild(l)}catch(o){console.log("Error ==>",o)}finally{a.value=""}});var h;(h=m)==null||h.addEventListener("click",t=>{const e=t.target,n=e==null?void 0:e.closest("button");if(n&&r&&n.classList.contains("delete__link")){const a=n.getAttribute("data-project-id");if(typeof a!="string")return;r.setAttribute("data-delete-id",a),r.showPopover()}});var j;(j=r)==null||j.addEventListener("toggle",t=>{var e;t.newState=="closed"&&((e=r)==null||e.setAttribute("data-delete-id",""))});var E;(E=y)==null||E.addEventListener("click",()=>{r&&r.hidePopover()});var f;(f=P)==null||f.addEventListener("click",async t=>{var a;const e=(a=r)==null?void 0:a.getAttribute("data-delete-id"),n=document.getElementById("project_"+e);if(!(!e||!r||!n))try{await b.Delete(`/api/project/${e}`),n.remove(),r.hidePopover()}catch(o){console.log("Error =>",o)}});
