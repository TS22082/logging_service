import{h as E,p as d,i as f,n as p,j as u,k as a,m as _,o as T}from"./constants-bC8bNLSd.js";import{i as b}from"./internalRequest-DgGd_5j3.js";const P=n=>{const e=document.createElement("tr"),r=document.createElement("td"),t=document.createElement("a"),c=document.createElement("td"),i=document.createElement("td"),l=document.createElement("td"),o=document.createElement("button"),s=document.createElement("td");return t.innerText=n.name,t.href=`/admin/project/${n.id}`,t.classList.add("primary__link"),c.innerText="1",i.innerText="0",o.innerText="Delete",o.setAttribute("data-project-id",n.id),o.classList.add("delete__link"),s.innerText=n.plan,r.appendChild(t),l.appendChild(o),e.setAttribute("id","project_"+n.id),e.appendChild(r),e.appendChild(s),e.appendChild(c),e.appendChild(i),e.appendChild(l),e};E.forEach(n=>{n.addEventListener("change",e=>{const t=e.target.value;d&&(d.innerText=f[t])})});p&&p.addEventListener("submit",async function(n){n.preventDefault();const e=Array.from(E).find(c=>c.checked),r=e?e.value:"basic",t=p.projectInput;if(!t.value){d&&(d.innerText="Project name cannot be blank"),setTimeout(()=>{d&&(d.innerText=f[r])},1e3);return}try{const c={project:t.value,plan:r},i=await b.Post("/api/project",c),{id:l,name:o}=i,s=P({id:l,name:o,plan:r});u&&u.appendChild(s)}catch(c){console.log("Error ==>",c)}finally{t.value=""}});var m;(m=u)==null||m.addEventListener("click",n=>{const e=n.target,r=e==null?void 0:e.closest("button");if(r&&r.classList.contains("delete__link")&&a){const t=r.getAttribute("data-project-id");if(!t)return;a.setAttribute("data-delete-id",t),a.showPopover()}});var j;(j=a)==null||j.addEventListener("toggle",n=>{var e;n.newState=="closed"&&((e=a)==null||e.setAttribute("data-delete-id",""))});var h;(h=_)==null||h.addEventListener("click",()=>{a&&a.hidePopover()});var v;(v=T)==null||v.addEventListener("click",async n=>{var t;const e=(t=a)==null?void 0:t.getAttribute("data-delete-id"),r=document.getElementById("project_"+e);if(!(!e||!a||!r))try{await b.Delete(`/api/project/${e}`),r.remove(),a.hidePopover()}catch(c){console.log("Error =>",c)}});
