import{J as p,h as D,p as c,i as v,n as u,j as m,k as r,m as T,o as b}from"./constants-6zwyP_62.js";const g=t=>{const e=document.createElement("tr"),a=document.createElement("td"),n=document.createElement("a"),o=document.createElement("td"),d=document.createElement("td"),l=document.createElement("td"),s=document.createElement("button"),i=document.createElement("td");return n.innerText=t.name,n.href=`/project/${t.id}`,n.classList.add("primary__link"),o.innerText="1",d.innerText="0",s.innerText="Delete",s.setAttribute("data-project-delete",`/api/project/${t.id}`),s.classList.add("delete__link"),i.innerText=t.plan,a.appendChild(n),l.appendChild(s),e.appendChild(a),e.appendChild(i),e.appendChild(o),e.appendChild(d),e.appendChild(l),e},y={Post:async(t,e)=>await(await fetch(t,{method:"POST",body:JSON.stringify(e),headers:p})).json(),Put:async t=>await(await fetch(t,{method:"PUT",headers:p})).json(),Delete:async t=>await(await fetch(t,{method:"DELETE",headers:p})).json()};D.forEach(t=>{t.addEventListener("change",e=>{const n=e.target.value;c&&(c.innerText=v[n])})});u&&u.addEventListener("submit",async function(t){t.preventDefault();const e=Array.from(D).find(o=>o.checked),a=e?e.value:"basic",n=u.projectInput;if(!n.value){c&&(c.innerText="Project name cannot be blank"),setTimeout(()=>{c&&(c.innerText=v[a])},1e3);return}try{const o={project:n.value,plan:a},d=await y.Post("/api/project",o);console.log("Data ==>",d);const{id:l,name:s}=d,i=g({id:l,name:s,plan:a});m&&m.appendChild(i)}catch(o){console.log("Error ==>",o)}finally{n.value=""}});var h;(h=m)==null||h.addEventListener("click",t=>{const e=t.target,a=e==null?void 0:e.closest("button");if(a&&r&&a.classList.contains("delete__link")){const n=a.getAttribute("data-project-delete");if(typeof n!="string")return;r.setAttribute("data-delete-url",n),r.showPopover()}});var f;(f=r)==null||f.addEventListener("toggle",t=>{var e;t.newState=="closed"&&((e=r)==null||e.setAttribute("data-delete-url",""))});var E;(E=T)==null||E.addEventListener("click",()=>{var t;(t=r)==null||t.hidePopover()});var j;(j=b)==null||j.addEventListener("click",async t=>{var a;const e=(a=r)==null?void 0:a.getAttribute("data-delete-url");if(!(!e||typeof e!="string"))try{const n=await y.Delete(e);console.log("Response ==>",n)}catch(n){console.log("Error =>",n)}});
